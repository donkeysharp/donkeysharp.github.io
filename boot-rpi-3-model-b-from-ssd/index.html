<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Booting Raspberry Pi 3 Model B from SSD | Donkeysharp</title>
<meta name="keywords" content="rpi, homelab, linux">
<meta name="description" content="
Hey everyone! In this post I&rsquo;m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it&hellip; sorry for the 1 year delay xD!

Probably there might be something I missed on my solution, so any feedback is really appreciated!
Before the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B&#43;. I used them for an electronics &#43; home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.">
<meta name="author" content="donkeysharp">
<link rel="canonical" href="https://blog.donkeysharp.xyz/boot-rpi-3-model-b-from-ssd/">
<meta name="google-site-verification" content="G-NE86EKXE5N">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7f710067e04dcceea91964a3f3e88a29f286096ac5fb3cb6541ffb78d592b3eb.css" integrity="sha256-f3EAZ&#43;BNzO6pGWSj8&#43;iKKfKGCWrF&#43;zy2VB/7eNWSs&#43;s=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.donkeysharp.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.donkeysharp.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.donkeysharp.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.donkeysharp.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.donkeysharp.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://blog.donkeysharp.xyz/boot-rpi-3-model-b-from-ssd/">
<link rel="alternate" hreflang="es" href="https://blog.donkeysharp.xyz/es/boot-rpi-3-model-b-from-ssd/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NE86EKXE5N"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-NE86EKXE5N');
</script>
<meta property="og:url" content="https://blog.donkeysharp.xyz/boot-rpi-3-model-b-from-ssd/">
  <meta property="og:site_name" content="Donkeysharp">
  <meta property="og:title" content="Booting Raspberry Pi 3 Model B from SSD">
  <meta property="og:description" content="
Hey everyone! In this post I’m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it… sorry for the 1 year delay xD!
Probably there might be something I missed on my solution, so any feedback is really appreciated!
Before the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B&#43;. I used them for an electronics &#43; home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2026-01-18T08:11:13-04:00">
    <meta property="article:modified_time" content="2026-01-18T08:11:13-04:00">
    <meta property="article:tag" content="Rpi">
    <meta property="article:tag" content="Homelab">
    <meta property="article:tag" content="Linux">
      <meta property="og:image" content="https://blog.donkeysharp.xyz/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.donkeysharp.xyz/images/papermod-cover.png">
<meta name="twitter:title" content="Booting Raspberry Pi 3 Model B from SSD">
<meta name="twitter:description" content="
Hey everyone! In this post I&rsquo;m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it&hellip; sorry for the 1 year delay xD!

Probably there might be something I missed on my solution, so any feedback is really appreciated!
Before the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B&#43;. I used them for an electronics &#43; home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.donkeysharp.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Booting Raspberry Pi 3 Model B from SSD",
      "item": "https://blog.donkeysharp.xyz/boot-rpi-3-model-b-from-ssd/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Booting Raspberry Pi 3 Model B from SSD",
  "name": "Booting Raspberry Pi 3 Model B from SSD",
  "description": "\nHey everyone! In this post I\u0026rsquo;m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it\u0026hellip; sorry for the 1 year delay xD!\nProbably there might be something I missed on my solution, so any feedback is really appreciated!\nBefore the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B+. I used them for an electronics + home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.\n",
  "keywords": [
    "rpi", "homelab", "linux"
  ],
  "articleBody": "\nHey everyone! In this post I’m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it… sorry for the 1 year delay xD!\nProbably there might be something I missed on my solution, so any feedback is really appreciated!\nBefore the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B+. I used them for an electronics + home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.\nThis time, as I was not going to use the RPIs for electronics, instead something that will require more disk usage, I wanted to try something I personally hadn’t tried before. I wanted to boot the RPIs from an SSD. Instead of spending money on new reliable, fast SD cards, I decided to use some spare SSDs I had instead. This is definitely something that was done before, but in my case there were some nuances that took me some days to realize how to fix them, and I wanted to share that experience with you.\nWhat I used For this experiment I used:\n4 RPI 3 Model B 1 RPI 3 Model B+ 5 Power supplies with the proper voltage and amps 5 Solid State Drives 5 USB to Sata adapters Booting from SSD There are multiple blog posts, forum entries and now LLMs that explain how to boot a RPI from an SSD (I added references I used in the references section below). In summary the steps required for RPI 3 Model B to USB boot from SSD are the next:\nUsing an SD card with RaspberryPI OS installed, run a full upgrade: sudo apt update -y \u0026\u0026 sudo apt full-upgrade -y The following command will give two possible results depending on whether USB boot is enabled or not: vcgencmd otp_dump | grep 17 17:1020000a \u003c\u003c\u003c\u003c it means USB boot is disabled 17:3020000a \u003c\u003c\u003c\u003c it means USB boot is enabled In case it is disabled, the way to enable it is by adding the following lines to the /boot/firmware/config.txt. Some tutorials mention the /boot/config.txt but those are outdated. program_usb_boot_mode=1 program_usb_boot_timeout=1 Finally, clone the content of the SD card that has RaspberryPI OS to the SSD, you can do that with dd: # /dev/mmcblk0 is the SD card in my case # /dev/sdb is the SSD connected via USB dd if=/dev/mmcblk0 of=/dev/sdb status=progress Then remove the SD card from the RPI, connect the SSD via USB and reboot. Congrats! You booted your RPI from USB and an SSD. Now you can resize and stuff. That’s the result I wished I had, but no, it didn’t work for 4 of my 5 RaspberryPIs. Let me tell you how I fixed-ish it.\nThe difference between RPI3 model B and RPI3 model B+ I executed the previous steps first (by coincidence on the RPI 3 Model B+). And it worked like a charm. Then for the next RPIs 3 Model B (not B+) it didn’t work, I tried all of the 4 RPIs with the same result. I made sure I added the program_usb_boot_timeout=1 setting to the /boot/firmware/config.txt file to increase the wait for RPI to detect the disk, even with that verification it didn’t work. No USB boot for the RPIs 3 Model B.\nAt that point, I got to the conclusion that at least in terms of booting, the RPI 3 Model B and RPI 3 Model B+ have differences.\nMy Solution (a fluke) After trying multiple combinations that didn’t work, it booted! I checked in the terminal and indeed, it booted from SSD. I executed some IO speed tests to make sure it was indeed using the SSD. It finally worked!\nThe new problem was I didn’t add any new configuration change xD, so I was very confused on why it worked. And I noticed that this time I forgot to remove the SD card. Both SD and USB SSD were connected.\nMy hypothesis was that for RPI 3 Model B, an SD card is still required to boot, no matter if the operating system is installed on a USB SSD.\nTo finally verify that hypothesis, I formatted the SD card and just copied the content of the /boot/ directory from the SSD, actually they must be the same.\nVoila! It booted again!\nWith that test, I was sure that the RPI 3 Model B requires an SD card to boot no matter where the OS is located.\nI used the SD cards from my old project, formatted them and copied the content of /boot/firmware from each SSD and it worked fine.\nIt is important not to copy the content of the /boot/firmware directory from one SSD to all the SD cards, as each SSD has a different UUID specified in the /boot/firmware/cmdline.txt file. Copy from each SSD or make sure the /boot/firmware/cmdline.txt has the proper values for the disk UUID.\nOne example of the cmdline.txt\nconsole=serial0,115200 console=tty1 root=PARTUUID=e000a75d-02 rootfstype=ext4 fsck.repair=yes rootwait cfg80211.ieee80211_regdom=US cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory Upgrading the operating system All the steps that I mentioned before happened when the latest RaspberryPI OS was based on Debian 12. Now the latest version of the RaspberryPI OS was released based on Debian 13, I decided that instead of formatting and doing the same process from scratch, I will follow the steps to do a RaspberryPI OS major upgrade.\nThese are the steps I follow for this matter:\nEdit /etc/apt/sources.list and /etc/apt/sources.list.d/raspi.list and change from bookworm to trixie. Run apt update to refresh the package indexes Run apt install -y apt dpkg to install the latest version of the package manager. Run apt upgrade --without-new-pkgs to install latest version without installing new dependencies. Make sure everything is fine. Finally apt full-upgrade Reboot That would be enough on any setup (it works on the RPI 3 Model B+), but in this case as we boot from the SD card first and not the SSD, we will need to follow some extra steps.\nLet’s recall some Linux theory: The Linux kernel image is located at the /boot directory, but in our case the RPI boots from SD. We still have the boot content from the previous installation. After the upgrade when I rebooted, the kernel was still 6.1 and not 6.12 which is the one that comes with Debian 13.\nIn order to have the upgrade 100% ready, I had to repeat the previous steps I did to make the RPI boot from SSD.\nMount the SD card mount /dev/mmcblk0p1 /mnt/sdboot/, Copy /boot/firmware from SSD to the SD card: cp -r /boot/firmware/* /mnt/sdboot/ Reboot After I followed those steps, I was able to have the upgrade 100% functional.\nIf you want to use containers In case you want to use containers or a container orchestrator such as K3S, make sure that the fields cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory are set in the /boot/firmware/cmdline.txt\nReferences https://forums.raspberrypi.com/viewtopic.php?t=359795 https://www.makeuseof.com/how-to-boot-raspberry-pi-ssd-permanent-storage/ https://pysselilivet.blogspot.com/2020/10/raspberry-pi-1-2-3-4-usb-ssd-boot.html ",
  "wordCount" : "1185",
  "inLanguage": "en",
  "image": "https://blog.donkeysharp.xyz/images/papermod-cover.png","datePublished": "2026-01-18T08:11:13-04:00",
  "dateModified": "2026-01-18T08:11:13-04:00",
  "author":{
    "@type": "Person",
    "name": "donkeysharp"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.donkeysharp.xyz/boot-rpi-3-model-b-from-ssd/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Donkeysharp",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.donkeysharp.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.donkeysharp.xyz/" accesskey="h" title="Donkeysharp (Alt + H)">Donkeysharp</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://blog.donkeysharp.xyz/es/" title="Español"
                            aria-label="Español">Español</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.donkeysharp.xyz/archive" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.donkeysharp.xyz/about/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.donkeysharp.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://blog.donkeysharp.xyz/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Booting Raspberry Pi 3 Model B from SSD
    </h1>
    <div class="post-meta"><span title='2026-01-18 08:11:13 -0400 -04'>January 18, 2026</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;donkeysharp&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="https://blog.donkeysharp.xyz/es/boot-rpi-3-model-b-from-ssd/">Español</a>
    </li>
</ul>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#what-i-used" aria-label="What I used">What I used</a></li></ul>
                    
                <li>
                    <a href="#booting-from-ssd" aria-label="Booting from SSD">Booting from SSD</a></li>
                <li>
                    <a href="#the-difference-between-rpi3-model-b-and-rpi3-model-b" aria-label="The difference between RPI3 model B and RPI3 model B&#43;">The difference between RPI3 model B and RPI3 model B+</a><ul>
                        
                <li>
                    <a href="#my-solution-a-fluke" aria-label="My Solution (a fluke)">My Solution (a fluke)</a></li>
                <li>
                    <a href="#upgrading-the-operating-system" aria-label="Upgrading the operating system">Upgrading the operating system</a></li>
                <li>
                    <a href="#if-you-want-to-use-containers" aria-label="If you want to use containers">If you want to use containers</a></li></ul>
                </li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p><img alt="alt text" loading="lazy" src="/img/rpi-homelab.jpeg"></p>
<p>Hey everyone! In this post I&rsquo;m going to share my experience of USB booting the Raspberry Pi 3 Model B from an SSD. Although it is something I did almost one year ago, I wanted to share it&hellip; sorry for the 1 year delay xD!</p>
<blockquote>
<p>Probably there might be something I missed on my solution, so any feedback is really appreciated!</p></blockquote>
<p>Before the pandemic started, a friend of mine sold me 4 Raspberry Pi 3 Model B and one Raspberry Pi 3 Model B+. I used them for an electronics + home automation project I no longer need anymore, so I decided to repurpose them to something new, a new project I started working on for which I will make another blog entry.</p>
<p>This time, as I was not going to use the RPIs for electronics, instead something that will require more disk usage, I wanted to try something I personally hadn&rsquo;t tried before. I wanted to boot the RPIs from an SSD. Instead of spending money on new reliable, fast SD cards, I decided to use some spare SSDs I had instead. This is definitely something that was done before, but in my case there were some nuances that took me some days to realize how to fix them, and I wanted to share that experience with you.</p>
<h3 id="what-i-used">What I used<a hidden class="anchor" aria-hidden="true" href="#what-i-used">#</a></h3>
<p>For this experiment I used:</p>
<ul>
<li>4 RPI 3 Model B</li>
<li>1 RPI 3 Model B+</li>
<li>5 Power supplies with the proper voltage and amps</li>
<li>5 Solid State Drives</li>
<li>5 USB to Sata adapters</li>
</ul>
<h2 id="booting-from-ssd">Booting from SSD<a hidden class="anchor" aria-hidden="true" href="#booting-from-ssd">#</a></h2>
<p>There are multiple blog posts, forum entries and now LLMs that explain how to boot a RPI from an SSD (I added references I used in the references section below). In summary the steps required for RPI 3 Model B to USB boot from SSD are the next:</p>
<ul>
<li>Using an SD card with RaspberryPI OS installed, run a full upgrade:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo apt update -y <span style="color:#f92672">&amp;&amp;</span> sudo apt full-upgrade -y
</span></span></code></pre></div></li>
<li>The following command will give two possible results depending on whether USB boot is enabled or not:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vcgencmd otp_dump | grep <span style="color:#ae81ff">17</span>
</span></span><span style="display:flex;"><span>17:1020000a <span style="color:#f92672">&lt;&lt;&lt;</span>&lt; it means USB boot is disabled
</span></span><span style="display:flex;"><span>17:3020000a <span style="color:#f92672">&lt;&lt;&lt;</span>&lt; it means USB boot is enabled
</span></span></code></pre></div></li>
<li>In case it is disabled, the way to enable it is by adding the following lines to the <code>/boot/firmware/config.txt</code>. Some tutorials mention the <code>/boot/config.txt</code> but those are outdated.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>program_usb_boot_mode<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>program_usb_boot_timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div></li>
<li>Finally, clone the content of the SD card that has RaspberryPI OS to the SSD, you can do that with dd:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># /dev/mmcblk0 is the SD card in my case</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># /dev/sdb is the SSD connected via USB</span>
</span></span><span style="display:flex;"><span>dd <span style="color:#66d9ef">if</span><span style="color:#f92672">=</span>/dev/mmcblk0 of<span style="color:#f92672">=</span>/dev/sdb status<span style="color:#f92672">=</span>progress
</span></span></code></pre></div></li>
<li>Then remove the SD card from the RPI, connect the SSD via USB and reboot.</li>
<li>Congrats! You booted your RPI from USB and an SSD. Now you can resize and stuff.</li>
</ul>
<p>That&rsquo;s the result I wished I had, but no, it didn&rsquo;t work for 4 of my 5 RaspberryPIs. Let me tell you how I fixed-ish it.</p>
<h2 id="the-difference-between-rpi3-model-b-and-rpi3-model-b">The difference between RPI3 model B and RPI3 model B+<a hidden class="anchor" aria-hidden="true" href="#the-difference-between-rpi3-model-b-and-rpi3-model-b">#</a></h2>
<p>I executed the previous steps first (by coincidence on the RPI 3 <strong>Model B+</strong>). And it worked like a charm. Then for the next RPIs 3 Model B (not B+) it didn&rsquo;t work, I tried all of the 4 RPIs with the same result. I made sure I added the <code>program_usb_boot_timeout=1</code> setting to the <code>/boot/firmware/config.txt</code> file to increase the wait for RPI to detect the disk, even with that verification it didn&rsquo;t work. No USB boot for the RPIs 3 Model B.</p>
<p>At that point, I got to the conclusion that at least in terms of booting, the RPI 3 Model B and RPI 3 Model B+ have differences.</p>
<h3 id="my-solution-a-fluke">My Solution (a fluke)<a hidden class="anchor" aria-hidden="true" href="#my-solution-a-fluke">#</a></h3>
<p>After trying multiple combinations that didn&rsquo;t work, it booted! I checked in the terminal and indeed, it booted from SSD. I executed some IO speed tests to make sure it was indeed using the SSD. It finally worked!</p>
<p>The new problem was I didn&rsquo;t add any new configuration change xD, so I was very confused on why it worked. And I noticed that this time I forgot to remove the SD card. Both SD and USB SSD were connected.</p>
<p>My hypothesis was that for RPI 3 Model B, an SD card is still required to boot, no matter if the operating system is installed on a USB SSD.</p>
<p>To finally verify that hypothesis, I formatted the SD card and just copied the content of the <code>/boot/</code> directory from the SSD, actually they <strong>must</strong> be the same.</p>
<p>Voila! It booted again!</p>
<p>With that test, I was sure that the <strong>RPI 3 Model B requires an SD card to boot no matter where the OS is located</strong>.</p>
<p>I used the SD cards from my old project, formatted them and copied the content of <code>/boot/firmware</code> from each SSD and it worked fine.</p>
<p>It is important <strong>not</strong> to copy the content of the <code>/boot/firmware</code> directory from <strong>one SSD to all the SD cards</strong>, as each SSD has a different UUID specified in the <code>/boot/firmware/cmdline.txt</code> file. Copy from each SSD or make sure the <code>/boot/firmware/cmdline.txt</code> has the proper values for the disk UUID.</p>
<p>One example of the <code>cmdline.txt</code></p>
<pre tabindex="0"><code>console=serial0,115200 console=tty1 root=PARTUUID=e000a75d-02 rootfstype=ext4 fsck.repair=yes rootwait cfg80211.ieee80211_regdom=US cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory
</code></pre><h3 id="upgrading-the-operating-system">Upgrading the operating system<a hidden class="anchor" aria-hidden="true" href="#upgrading-the-operating-system">#</a></h3>
<p>All the steps that I mentioned before happened when the latest RaspberryPI OS was based on Debian 12. Now the latest version of the RaspberryPI OS was released based on Debian 13, I decided that instead of formatting and doing the same process from scratch, I will follow the steps to do a RaspberryPI OS major upgrade.</p>
<p>These are the steps I follow for this matter:</p>
<ul>
<li>Edit <code>/etc/apt/sources.list</code> and <code>/etc/apt/sources.list.d/raspi.list</code> and change from <code>bookworm</code> to <code>trixie</code>.</li>
<li>Run <code>apt update</code> to refresh the package indexes</li>
<li>Run <code>apt install -y apt dpkg</code> to install the latest version of the package manager.</li>
<li>Run <code>apt upgrade --without-new-pkgs</code> to install latest version without installing new dependencies. Make sure everything is fine.</li>
<li>Finally <code>apt full-upgrade</code></li>
<li>Reboot</li>
</ul>
<p>That would be enough on any setup (it works on the <strong>RPI 3 Model B+</strong>), but in this case as we boot from the SD card first and not the SSD, we will need to follow some extra steps.</p>
<p>Let&rsquo;s recall some Linux theory: The Linux kernel image is located at the <code>/boot</code> directory, but in our case the RPI boots from SD. We still have the boot content from the previous installation. After the upgrade when I rebooted, the kernel was still <code>6.1</code> and not <code>6.12</code> which is the one that comes with Debian 13.</p>
<p>In order to have the upgrade 100% ready, I had to repeat the previous steps I did to make the RPI boot from SSD.</p>
<ul>
<li>Mount the SD card <code>mount /dev/mmcblk0p1 /mnt/sdboot/</code>,</li>
<li>Copy <code>/boot/firmware</code> from SSD to the SD card: <code>cp -r /boot/firmware/* /mnt/sdboot/</code></li>
<li>Reboot</li>
</ul>
<p>After I followed those steps, I was able to have the upgrade 100% functional.</p>
<h3 id="if-you-want-to-use-containers">If you want to use containers<a hidden class="anchor" aria-hidden="true" href="#if-you-want-to-use-containers">#</a></h3>
<p>In case you want to use containers or a container orchestrator such as K3S, make sure that the fields <code>cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory</code> are set in the <code>/boot/firmware/cmdline.txt</code></p>
<h2 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h2>
<ul>
<li><a href="https://forums.raspberrypi.com/viewtopic.php?t=359795">https://forums.raspberrypi.com/viewtopic.php?t=359795</a></li>
<li><a href="https://www.makeuseof.com/how-to-boot-raspberry-pi-ssd-permanent-storage/">https://www.makeuseof.com/how-to-boot-raspberry-pi-ssd-permanent-storage/</a></li>
<li><a href="https://pysselilivet.blogspot.com/2020/10/raspberry-pi-1-2-3-4-usb-ssd-boot.html">https://pysselilivet.blogspot.com/2020/10/raspberry-pi-1-2-3-4-usb-ssd-boot.html</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blog.donkeysharp.xyz/tags/rpi/">Rpi</a></li>
      <li><a href="https://blog.donkeysharp.xyz/tags/homelab/">Homelab</a></li>
      <li><a href="https://blog.donkeysharp.xyz/tags/linux/">Linux</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://blog.donkeysharp.xyz/intro-to-aws-nuke/">
    <span class="title">Next »</span>
    <br>
    <span>Nuke&#39;em all! Using AWS Nuke to clean your AWS accounts</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on x"
            href="https://x.com/intent/tweet/?text=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD&amp;url=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f&amp;hashtags=rpi%2chomelab%2clinux">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f&amp;title=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD&amp;summary=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD&amp;source=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f&title=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on whatsapp"
            href="https://api.whatsapp.com/send?text=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD%20-%20https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on telegram"
            href="https://telegram.me/share/url?text=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD&amp;url=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Booting Raspberry Pi 3 Model B from SSD on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Booting%20Raspberry%20Pi%203%20Model%20B%20from%20SSD&u=https%3a%2f%2fblog.donkeysharp.xyz%2fboot-rpi-3-model-b-from-ssd%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
<div class="comments">
  <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-donkeysharp-xyz-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://x.com/donkeysharp">Donkeysharp</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
